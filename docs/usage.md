# 4. 利用者ガイド (Usage Guide)

このドキュメントは、インテリジェントRAGチャットシステムの利用者向けのガイドです。

## 4.1. チャット利用者向け

システムのメイン機能であるチャットインターフェースの使い方を説明します。

### アクセス方法

1.  システム管理者が提供するURLにブラウザでアクセスします。
    -   デフォルトのローカル開発環境では `http://localhost:8501` です。

### 基本的な使い方

1.  **質問の入力**:
    画面下部にある「What would you like to know?」というテキストボックスに、社内ドキュメントに関する質問を自然言語で入力し、エンターキーを押すか送信ボタンをクリックします。

2.  **回答の確認**:
    入力した質問の下に、AIアシスタントからの回答が表示されます。回答は、システムに取り込まれたドキュメントの内容に基づいています。

3.  **引用元の確認**:
    AIアシスタントの回答の下に「View Sources」という項目が表示されることがあります。これをクリックすると、回答の根拠となったドキュメントのファイル名と、関連する部分の抜粋（スニペット）を確認できます。これにより、回答の信頼性を検証できます。

4.  **会話の継続**:
    表示された回答に関連して、さらに深掘りした質問を続けることができます。システムは過去のやり取りを記憶しているため、文脈を考慮した回答を返します。（*注: 現在の実装では、セッション内の短期的な履歴のみを考慮します*）

## 4.2. システム管理者向け

ドキュメントの取り込み（Ingestion）を担当する管理者向けのガイドです。

### 概要

ドキュメントの取り込みは、プロジェクトルートにある`cli.py`というコマンドラインインターフェース（CLI）ツールを使用して行います。このツールは、様々な形式のファイル（PDF, Word, Markdownなど）を自動でテキストに変換し、システム内のVector Storeに登録します。

### 前提条件

-   Python環境がセットアップされていること。
-   プロジェクトの依存関係がインストールされていること。
    ```bash
    # プロジェクトルートで実行
    pip install -r requirements.txt
    ```
-   チャットシステム（BackendとChromaDB）がDocker Composeで起動していること。
    ```bash
    sudo docker compose up -d
    ```

### ドキュメントの取り込み手順

1.  **コマンドの実行**:
    ターミナルを開き、プロジェクトのルートディレクトリで以下の形式のコマンドを実行します。

    ```bash
    python cli.py ingest <取り込みたいファイルのパス>
    ```

2.  **具体例**:
    -   `my_documents`フォルダにある`project_spec.pdf`を取り込む場合:
        ```bash
        python cli.py ingest my_documents/project_spec.pdf
        ```
    -   デスクトップにある`manual.docx`を取り込む場合:
        ```bash
        python cli.py ingest /Users/your_username/Desktop/manual.docx
        ```

3.  **結果の確認**:
    コマンドを実行すると、処理の進捗がコンソールに表示されます。
    -   **成功した場合**: `Success: Successfully ingested <ファイル名>` のようなメッセージが表示されます。
    -   **失敗した場合**: 赤い文字でエラーメッセージが表示されます。ファイルパスが間違っている、システムが起動していない、などの原因が考えられます。

### 対応ファイル形式

`markitdown`ライブラリにより、以下の主要なファイル形式に対応しています。

-   PDF (`.pdf`)
-   Microsoft Word (`.docx`)
-   Microsoft PowerPoint (`.pptx`)
-   Microsoft Excel (`.xlsx`)
-   Markdown (`.md`)
-   プレーンテキスト (`.txt`)
-   その他、HTML、CSV、JSONなど多数
